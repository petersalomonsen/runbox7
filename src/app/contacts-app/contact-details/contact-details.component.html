<div class="contact-details" *ngIf="!contact">
    Select a contact to view or edit its details
</div>

<div class="contact-details" *ngIf="contact">
    <h2> {{ contact.full_name() || "New contact" }}'s details </h2>
    <form #form="ngForm">
        <table>
            <tr>
                <td> Nickname: </td>
                <td> <input name="nickname"
                            [(ngModel)]="contact.nickname"
                            placeholder="Nickname">
                </td>
            </tr>
            <tr>
                <td> First name: </td>
                <td> <input name="first_name"
                            [(ngModel)]="contact.first_name"
                            placeholder="First name">
                </td>
            </tr>
            <tr>
                <td> Last name: </td>
                <td> <input name="last_name"
                            [(ngModel)]="contact.last_name"
                            placeholder="Last Name">
                </td>
            </tr>
            <tr>
                <td> Email address: </td>
                <td> <input name="email"
                            [(ngModel)]="contact.email"
                            placeholder="E-mail address">
                </td>
                <td>
                    <a mat-button routerLink="/compose" [queryParams]="{to: contact.email}">
                        <mat-icon>email</mat-icon> Write an email to {{ contact.full_name() }}
                    </a>
                </td>
            </tr>
            <tr>
                <td> Birthday: </td>
                <td> <input name="birthday"
                            [(ngModel)]="contact.birthday"
                            placeholder="Birthday">
                </td>
            </tr>
            <tr>
                <td> Website: </td>
                <td> <input name="website"
                            [(ngModel)]="contact.url"
                            placeholder="Website">
                </td>
            </tr>
            <tr>
                <td> Company: </td>
                <td> <input name="company"
                            [(ngModel)]="contact.company"
                            placeholder="Company">
                </td>
            </tr>
            <tr>
                <td> Department: </td>
                <td> <input name="department"
                            [(ngModel)]="contact.department"
                            placeholder="Department">
                </td>
            </tr>
            <tr>
                <td> Notes: </td>
                <td> <textarea name="notes"
                            [(ngModel)]="contact.note"
                            placeholder="Contact notes">
                     </textarea>
                </td>
            </tr>
        </table>
        <div *ngIf="form.dirty">
            <a mat-button (click)="save()">Save changes</a>
            <a mat-button (click)="rollback()" *ngIf="contact.id">Discard changes</a>
        </div>
    </form>
</div>
